# XSS

XSS (Cross Site Scripting)，即跨站脚本攻击。

恶意攻击者往 Web 页面里嵌入恶意的客户端脚本，当用户浏览此网页时，脚本就会在用户的浏览器上执行，进而达到攻击者的目的。比如获取用户的 Cookie、导航到恶意网站、携带木马等。借助安全圈里面非常有名的一句话：

> 所有的输入都是有害的。

这句话说得很对，大部分 XSS 都是没有处理好用户的输入，导致恶意脚本在浏览器执行。


### XSS 类型
#### 反射型（非持久型）
只是简单地把用户输入的数据反射给浏览器,简单来说,黑客往往需要去诱使用户点击一个恶意链接,才能攻击成功。
#### 存储型
将用户输入的数据存储在服务器端,每次用户访问都会被执行js脚本。
#### DOM型
基于文档对象模型Document Objeet Model，DOM)的一种漏洞。DOM是一个与平台、编程语言无关的接口，它允许程序或脚本动态地访问和更新文档内容、结构和样式，处理后的结果能够成为显示页面的一部分。DOM中有很多对象，其中一些是用户可以操纵的，如uRI，location，refelTer等。客户端的脚本程序可以通过DOM动态地检查和修改页面内容，它不依赖于提交数据到服务器端，而从客户端获得DOM中的数据在本地执行，如果DOM中的数据没有经过严格确认，就会产生DOM—based XSS漏洞。



# CSRF

 CSRF (Cross Site Request Forgery)攻击，中文名：跨站请求伪造。

其原理是攻击者构造网站后台某个功能接口的请求地址，诱导用户去点击或者用特殊方法让该请求地址自动加载。

## **防御CSRF攻击**

### 1.验证 HTTP Referer 字段

根据 HTTP 协议，在 HTTP 头中有一个字段叫 Referer，它记录了该 HTTP 请求的来源地址。在通常情况下，访问一个安全受限页面的请求来自于同一个网站。

但是 `Referer ` 现在是可以被修改的，并且 Referer 值会记录下用户的访问来源，有些用户认为这样会侵犯到他们自己的隐私权。因此，用户自己可以设置浏览器使其在发送请求时不再提供 Referer。当他们正常访问网站时，网站会因为请求没有 Referer 值而认为是 CSRF 攻击，拒绝合法用户的访问。

### 2. 请求地址中添加 token 

在 HTTP 请求中以参数的形式加入一个随机产生的 token，并在服务器端建立一个拦截器来验证这个 token，如果请求中没有 token 或者 token 内容不正确，则认为可能是 CSRF 攻击而拒绝该请求。

### 3. 在 HTTP 头中自定义属性